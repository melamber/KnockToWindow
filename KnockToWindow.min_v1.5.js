(function(b,m){b.fn.KnockToWindow=function(h){var c=this,a=b.extend({position:"bottom-right",width:"200px",height:"75px",addition:"vertical",transition:"fade",timeOpen:1,timeClose:1,duration:1E4,actionOpen:0,actionClose:0,content:"",closeElement:"<button class='KTWClose'>Close</button>"},h),f=a.position.split("-"),k=function(){switch(f[0]){case "middle":return{top:50-c.outerHeight()/2/(m.innerHeight/100)+"%"};case "top":return{top:"0"};default:return{bottom:"0"}}},l=function(){switch(f[1]){case "center":return{left:50- c.outerWidth()/2/(m.innerWidth/100)+"%"};case "left":return{left:"0"};default:return{right:"0"}}};h="horizontal"===a.addition?{height:a.height,width:"auto"}:{height:"auto",width:a.width};var n;n="horizontal"===a.addition?{width:a.width,height:"100%","float":"left"}:{height:a.height,width:"100%"};var g=function(){switch(a.transition){case "slide":return"horizontal"===a.addition?{show:{width:a.width},hide:{width:0}}:{show:{height:a.height},hide:{height:0}};case "show":var b=/(\d*)([^\d]*)/,c=function(a, b,c){return parseInt(b)/2+c};return{show:{width:a.width,height:a.height,marginTop:"0",marginLeft:"0"},hide:{marginTop:a.height.replace(b,c),marginLeft:"horizontal"===a.addition?0:a.width.replace(b,c),width:0,height:0}};default:return{show:{opacity:1},hide:{opacity:0}}}}(),p=function(a){"function"===typeof a&&a()},d=c.data("counter");c.data("counter","undefined"===typeof d?d=0:d+=1);var q=b("<div/>").css("opacity",0).attr({id:d,"class":"KTWNotice"}).append(a.content).append(a.closeElement);"bottom"=== f[0]||"right"===f[1]?c.prepend(q):c.append(q);var e=b("#"+d);"fade"!==a.transition&&setTimeout(function(){e.css({opacity:1})},50);e.css(g.hide).animate(g.show,{duration:a.timeOpen,step:function(){setTimeout(function(){c.css(b.extend(k(),l()))},50)},complete:p(a.actionOpen)}).css(n).on("click.KnockToWindow",function(){clearTimeout(b(this).data("timeout"));b(this).css(g.show).stop()}).on("click.KnockToWindow",".KTWClose",function(){b(this).parent().remove();c.css(b.extend(k(),l()))});if(0!==a.duration)var r= setTimeout(function(){e.animate(g.hide,{duration:a.timeClose,step:function(){setTimeout(function(){c.css(b.extend(k(),l()))},50)},complete:function(){p(a.actionClose);e.remove()}})},a.duration);e.data("timeout",r);c.css(h);return this}})(jQuery,window);